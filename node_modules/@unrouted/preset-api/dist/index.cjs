'use strict';

const core = require('@unrouted/core');
const cors = require('cors');
const h3 = require('h3');

function _interopDefaultCompat (e) { return e && typeof e === 'object' && 'default' in e ? e.default : e; }

const cors__default = /*#__PURE__*/_interopDefaultCompat(cors);

const name = "@unrouted/preset-api";
const version = "0.6.0";

const presetApi = core.defineUnroutedPreset({
  meta: {
    name,
    version
  },
  defaults: {
    cors: true
  },
  setup(ctx, options) {
    if (options.cors) {
      const corsOptions = typeof options.cors === "boolean" ? {} : options.cors;
      ctx.config.middleware.push(h3.fromNodeMiddleware(cors__default(corsOptions)));
    }
  }
});

exports.presetApi = presetApi;
